[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Hi! I’m a graduate student at Johns Hopkins Bloomberg School of Public Health and I’m studying epidemiology with a focus on pharmacoepidemiology. I’m excited for future opportunities to learn more about drug safety, utilization, and effectiveness.\nOutside of school, I love to run 👟, sew 🧵, and cook 🥗. I’m originally from Southern California and I’m having so much fun exploring Baltimore!"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Sydney Lewis",
    "section": "",
    "text": "Hi! I’m a graduate student at Johns Hopkins Bloomberg School of Public Health. I’m studying epidemiology with a focus on pharmacoepidemiology. I’m excited for future opportunities to learn how to use data science skills to improve public health.\nConnect with me:\n\n\n LinkedIn\n\n\n Github\n\n\n Email"
  },
  {
    "objectID": "about.html#bio",
    "href": "about.html#bio",
    "title": "About",
    "section": "",
    "text": "Hi! I’m a graduate student at Johns Hopkins Bloomberg School of Public Health and I’m studying epidemiology with a focus on pharmacoepidemiology. I’m excited for future opportunities to learn more about drug safety, utilization, and effectiveness.\nOutside of school, I love to run 👟, sew 🧵, and cook 🥗. I’m originally from Southern California and I’m having so much fun exploring Baltimore!"
  },
  {
    "objectID": "about.html#education",
    "href": "about.html#education",
    "title": "About",
    "section": "📊 Education",
    "text": "📊 Education\nJohns Hopkins Bloomberg School of Public Health | Baltimore, MD\nScM in Epidemiology (in progress) | 2023 - present\nReed College | Portland, OR\nBA in Sociology | 2014 - 2018"
  },
  {
    "objectID": "about.html#experience",
    "href": "about.html#experience",
    "title": "About",
    "section": "🌳 Experience",
    "text": "🌳 Experience\nStudy Coordinator | Family Health Centers of San Diego | 2021 - 2023\nAnalyst | Family Health Centers of San Diego | 2020 - 2021\nHealth Educator | Family Health Centers of San Diego | 2019 - 2020\nHealth Promotions Volunteer | American Red Cross | 2018 - 2019\nOutreach Coordinator | Reed College Wellness Center | 2015 - 2018\nHealth Education Intern | Breathe DC | Summer 2017\nCommunity Health Intern | American Lung Association | Summers 2015 & 2016"
  },
  {
    "objectID": "Example_Analysis.html",
    "href": "Example_Analysis.html",
    "title": "Example Analysis",
    "section": "",
    "text": "In this analysis, I am interested in exploring how substance use varies across age and gender in the United States. This analysis is intended for anyone interested in public health and trends related to these topics."
  },
  {
    "objectID": "Example_Analysis.html#where-does-my-data-come-from",
    "href": "Example_Analysis.html#where-does-my-data-come-from",
    "title": "Example Analysis",
    "section": "",
    "text": "I used data from the 2021 National Survey of Drug Use and Health. I downloaded the data via this link and the codebook is linked here.\n\n\nCode\nlibrary(haven)\nlibrary(tidyverse)\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\nnsduh_2021_raw &lt;- read_dta(\"~/Downloads/NSDUH-2021-DS0001-bndl-data-stata_v3/NSDUH_2021.DTA\")\n\n\n\n\nCode\nkeep_columns &lt;- c(\"AGE3\", \"irsex\", \"cigever\", \"cigtry\", \"cigarevr\", \"cigartry\", \"alcever\", \"alctry\", \"mjever\", \"mjage\", \"cocever\", \"cocage\", \"crkever\", \"crkage\", \"herever\", \"herage\", \"hallucevr\", \"hallucage\", \"methamevr\", \"methamage\", \"inhalever\", \"inhalage\")\n\nfactors &lt;- c(\"age\", \"sex\", \"cig_ever\", \"cigar_ever\", \"alc_ever\", \"mj_ever\", \"coc_ever\", \"crk_ever\", \"her_ever\", \"halluc_ever\", \"meth_ever\", \"inhal_ever\")\n\nnsduh_2021_v1 &lt;- nsduh_2021_raw %&gt;%\n  select(keep_columns) %&gt;%\n  mutate(agenum = case_when(\n      AGE3 == 1 ~ 12.5,\n      AGE3 == 2 ~ 14.5,\n      AGE3 == 3 ~ 16.5,\n      AGE3 == 4 ~ 19,\n      AGE3 == 5 ~ 22,\n      AGE3 == 6 ~ 24.5,\n      AGE3 == 7 ~ 27.5,\n      AGE3 == 8 ~ 32,\n      AGE3 == 9 ~ 42,\n      AGE3 == 10 ~ 57,\n      AGE3 == 11 ~ 70,\n      TRUE ~ NA\n    ),\n    age = case_when(\n    AGE3 == 1 ~ \"12 to 13\",\n    AGE3 == 2 ~ \"14 to 15\",\n    AGE3 == 3 ~ \"16 to 17\",\n    AGE3 == 4 ~ \"18 to 20\",\n    AGE3 == 5 ~ \"21 to 23\",\n    AGE3 == 6 ~ \"24 to 25\",\n    AGE3 == 7 ~ \"26 to 29\",\n    AGE3 == 8 ~ \"30 to 34\",\n    AGE3 == 9 ~ \"35 to 49\",\n    AGE3 == 10 ~ \"50 to 64\",\n    AGE3 == 11 ~ \"65+\",\n    TRUE ~ NA),\n    sex = case_when(\n      irsex == 1 ~ \"Male\",\n      irsex == 2 ~ \"Female\",\n      TRUE ~ NA),\n    cig_ever = case_when(\n      cigever == 1 ~ \"Yes\",\n      cigever == 2 ~ \"No\",\n      TRUE ~ NA),\n    cigar_ever = case_when(\n      cigarevr == 1 ~ \"Yes\",\n      cigarevr == 2 ~ \"No\",\n      TRUE ~ NA),\n    alc_ever = case_when(\n      alcever == 1 ~ \"Yes\",\n      alcever == 2 ~ \"No\",\n      TRUE ~ NA),\n    mj_ever = case_when(\n      mjever == 1 ~ \"Yes\",\n      mjever == 2 ~ \"No\",\n      TRUE ~ NA),\n    coc_ever = case_when(\n      cocever == 1 ~ \"Yes\",\n      cocever == 2 ~ \"No\",\n      TRUE ~ NA),\n    crk_ever = case_when(\n      crkever == 1 ~ \"Yes\",\n      crkever == 2 ~ \"No\",\n      TRUE ~ NA),\n    her_ever = case_when(\n      herever == 1 ~ \"Yes\",\n      herever == 2 ~ \"No\",\n      TRUE ~ NA),\n    halluc_ever = case_when(\n      hallucevr == 1 ~ \"Yes\",\n      hallucevr == 91 ~ \"No\",\n      TRUE ~ NA),\n    meth_ever = case_when(\n      methamevr == 1 ~ \"Yes\",\n      methamevr == 2 ~ \"No\",\n      TRUE ~ NA),\n    inhal_ever = case_when(\n      inhalever == 1 ~ \"Yes\",\n      inhalever == 91 ~ \"No\",\n      TRUE ~ NA),\n    across(factors, as.factor),\n    cig_tryage = ifelse(\n      cigtry &gt;= 1 & cigtry &lt;= 100, cigtry, NA),\n    cigar_tryage = ifelse(\n      cigartry &gt;= 1 & cigartry &lt;= 100, cigartry, NA),\n    alc_tryage = ifelse(\n      alctry &gt;= 1 & alctry &lt;= 100, alctry, NA),\n    coc_tryage = ifelse(\n      cocage &gt;= 1 & cocage &lt;= 100, cocage, NA),\n    halluc_tryage = ifelse(\n      hallucage &gt;= 1 & hallucage &lt;= 100, hallucage, NA),\n    her_tryage = ifelse(\n      herage &gt;= 1 & herage &lt;= 100, herage, NA),\n    meth_tryage = ifelse(\n      methamage &gt;= 1 & methamage &lt;= 100, methamage, NA),\n    mj_tryage = ifelse(\n      mjage &gt;= 1 & mjage &lt;= 100, mjage, NA),\n    inhal_tryage = ifelse(\n      inhalage &gt;= 1 & inhalage &lt;= 100, inhalage, NA),\n    )\n\n\nWarning: Using an external vector in selections was deprecated in tidyselect 1.1.0.\nℹ Please use `all_of()` or `any_of()` instead.\n  # Was:\n  data %&gt;% select(keep_columns)\n\n  # Now:\n  data %&gt;% select(all_of(keep_columns))\n\nSee &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.\n\n\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `across(factors, as.factor)`.\nCaused by warning:\n! Using an external vector in selections was deprecated in tidyselect 1.1.0.\nℹ Please use `all_of()` or `any_of()` instead.\n  # Was:\n  data %&gt;% select(factors)\n\n  # Now:\n  data %&gt;% select(all_of(factors))\n\nSee &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;."
  },
  {
    "objectID": "Example_Analysis.html#across-different-age-groups-how-does-experience-using-different-substances-vary",
    "href": "Example_Analysis.html#across-different-age-groups-how-does-experience-using-different-substances-vary",
    "title": "Example Analysis",
    "section": "",
    "text": "Code\nsubstance_ever &lt;- nsduh_2021_v1 %&gt;%\n  filter(across(c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), ~ !is.na(.))) %&gt;%\n  pivot_longer(cols = c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), names_to = \"Substance\", values_to = \"Ever_Tried\") %&gt;%\n  group_by(age, Substance, Ever_Tried) %&gt;%\n  summarise(Count = n()) %&gt;%\n  group_by(age, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Ever_Tried == \"Yes\"]) / sum(Count) * 100)\n\n\nWarning: Using `across()` in `filter()` was deprecated in dplyr 1.0.8.\nℹ Please use `if_any()` or `if_all()` instead.\n\n\n`summarise()` has grouped output by 'age', 'Substance'. You can override using\nthe `.groups` argument.\n\n\nCode\nsubstance_ever$Substance &lt;- factor(substance_ever$Substance)\n\nggplot(substance_ever, aes(x = age, y = Percentage, color = Substance, group = Substance)) +\n  geom_point() +\n  geom_path() +\n  labs(title = \"Proportion of Respondants by Age Group Who Have \\nEver Tried Each Substance\",\n       x = \"Age Group\",\n       y = \"Percentage of Respondants\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  scale_color_discrete(labels = c(\n    cig_ever = \"Cigarettes\",\n    cigar_ever = \"Cigars\",\n    alc_ever = \"Alcohol\",\n    mj_ever = \"Marijuana\",\n    coc_ever = \"Cocaine\",\n    her_ever = \"Heroin\",\n    halluc_ever = \"Hallucinogens\",\n    meth_ever = \"Meth\",\n    inhal_ever = \"Inhalants\"\n  ))"
  },
  {
    "objectID": "Example_Analysis.html#how-does-exposure-to-different-substances-vary-across-sex-and-age-group",
    "href": "Example_Analysis.html#how-does-exposure-to-different-substances-vary-across-sex-and-age-group",
    "title": "Example Analysis",
    "section": "",
    "text": "Code\nsubstance_ever_sex &lt;- nsduh_2021_v1 %&gt;%\n  filter(across(c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), ~ !is.na(.))) %&gt;%\n  pivot_longer(cols = c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), names_to = \"Substance\", values_to = \"Ever_Tried\") %&gt;%\n  group_by(age, sex, Substance, Ever_Tried) %&gt;%\n  summarise(Count = n()) %&gt;%\n  group_by(age, sex, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Ever_Tried == \"Yes\"]) / sum(Count) * 100,\n         substance_label = case_when(\n           Substance == \"cig_ever\" ~ \"Cigarettes\",\n           Substance == \"cigar_ever\" ~ \"Cigars\",\n           Substance == \"alc_ever\" ~ \"Alcohol\",\n           Substance == \"mj_ever\" ~ \"Marijuana\",\n           Substance == \"coc_ever\" ~ \"Cocaine\",\n           Substance == \"her_ever\" ~ \"Heroin\",\n           Substance == \"halluc_ever\" ~ \"Hallucinogen\",\n           Substance == \"meth_ever\" ~ \"Methamphetamine\",\n           Substance == \"inhal_ever\" ~ \"Inhalants\",\n           TRUE ~ NA\n         ))\n\n\nWarning: Using `across()` in `filter()` was deprecated in dplyr 1.0.8.\nℹ Please use `if_any()` or `if_all()` instead.\n\n\n`summarise()` has grouped output by 'age', 'sex', 'Substance'. You can override\nusing the `.groups` argument.\n\n\nCode\nsubstance_ever_sex$Substance &lt;- factor(substance_ever_sex$Substance)\n\nggplot(substance_ever_sex, aes(x = age, y = Percentage, color = sex, group = sex)) +\n  geom_point() +\n  geom_path() +\n  labs(title = \"Percentage of Respondants Who Have Ever Tried Each Substance \\nAcross Age Groups and Sex\",\n       x = \"Age Group\",\n       y = \"Percentage\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\nfacet_wrap(~ substance_label, scales = \"free_y\", ncol = 3) +\nscale_color_manual(values = c(\"Female\" = \"purple\", \"Male\" = \"darkgreen\")) +\ntheme(legend.position = \"top\")"
  },
  {
    "objectID": "Example_Analysis.html#among-those-who-have-exposure-to-a-substance-when-do-these-people-most-often-try-a-substance-for-the-first-time",
    "href": "Example_Analysis.html#among-those-who-have-exposure-to-a-substance-when-do-these-people-most-often-try-a-substance-for-the-first-time",
    "title": "Example Analysis",
    "section": "",
    "text": "Code\nmedian_Substance_order &lt;- nsduh_2021_v1 %&gt;%\n  pivot_longer(cols = c(cig_tryage, cigar_tryage, alc_tryage, mj_tryage, coc_tryage, her_tryage, halluc_tryage, meth_tryage, inhal_tryage), names_to = \"Substance\", values_to = \"Try_Age\") %&gt;%\n  group_by(Substance) %&gt;%\n  summarise(Median_Try_Age = median(Try_Age, na.rm = TRUE)) %&gt;%\n  arrange(Median_Try_Age) %&gt;%\n  pull(Substance)\n\ncustom_labels &lt;- c(\n  \"cig_tryage\" = \"Cigarettes\",\n  \"cigar_tryage\" = \"Cigars\",\n  \"alc_tryage\" = \"Alcohol\",\n  \"mj_tryage\" = \"Marijuana\",\n  \"coc_tryage\" = \"Cocaine\",\n  \"her_tryage\" = \"Heroin\",\n  \"halluc_tryage\" = \"Hallucinogens\",\n  \"meth_tryage\" = \"Meth\",\n  \"inhal_tryage\" = \"Inhalants\"\n)\n\nproportion_data &lt;- nsduh_2021_v1 %&gt;%\n  pivot_longer(cols = c(cig_tryage, cigar_tryage, alc_tryage, mj_tryage, coc_tryage, her_tryage, halluc_tryage, meth_tryage, inhal_tryage), names_to = \"Substance\", values_to = \"Try_Age\") %&gt;%\n  filter(!is.na(Try_Age)) %&gt;%\n  mutate(Try_Age_Group = case_when(\n    Try_Age &gt;= 0 & Try_Age &lt; 5 ~ \"0-4\",\n    Try_Age &gt;= 5 & Try_Age &lt; 10 ~ \"5-9\",\n    Try_Age &gt;= 10 & Try_Age &lt; 15 ~ \"10-14\",\n    Try_Age &gt;= 15 & Try_Age &lt; 20 ~ \"15-19\",\n    Try_Age &gt;= 20 & Try_Age &lt; 25 ~ \"20-24\",\n    Try_Age &gt;= 25 & Try_Age &lt; 30 ~ \"25-29\",\n    Try_Age &gt;= 30 & Try_Age &lt; 35 ~ \"30-34\",\n    Try_Age &gt;= 35 & Try_Age &lt; 40 ~ \"35-39\",\n    Try_Age &gt;= 40 & Try_Age &lt; 45 ~ \"40-44\",\n    Try_Age &gt;= 45 & Try_Age &lt; 50 ~ \"45-49\",\n    Try_Age &gt;= 50 & Try_Age &lt; 55 ~ \"50-54\",\n    Try_Age &gt;= 55 ~ \"55+\",\n    TRUE ~ \"Other\"\n  )) %&gt;%\n  mutate(Try_Age_Group = factor(Try_Age_Group, levels = c(\"0-4\", \"5-9\", \"10-14\", \"15-19\", \"20-24\", \"25-29\", \"30-34\", \"35-39\", \"40-44\", \"45-49\", \"50-54\", \"55+\", \"Other\"))) %&gt;%\n  group_by(Substance, Try_Age_Group) %&gt;%\n  count() %&gt;%\n  ungroup() %&gt;%\n  group_by(Substance) %&gt;%\n  mutate(proportion = n / sum(n) * 100) %&gt;%\n  ungroup()\n\nggplot(proportion_data, aes(x = Try_Age_Group, y = factor(Substance, levels = median_Substance_order), fill = proportion)) +\n  geom_tile() +\n  scale_fill_gradient(low = \"lightblue\", high = \"darkblue\") +\n  theme_minimal() +\n  labs(\n    title = \"Proportion of People by Age and Substance\",\n    x = \"Age of first exposure\",\n    y = \"Substance\",\n    fill = \"Percentage\"\n  ) + \n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  scale_y_discrete(labels = custom_labels)"
  },
  {
    "objectID": "Example_Analysis.html#data-source",
    "href": "Example_Analysis.html#data-source",
    "title": "Example Analysis",
    "section": "",
    "text": "Where does my dataset come from?\n\n\nNSDUH has been conducted by the U.S. government since 1971. NSDUH FAQ\nI used data from the 2021 National Survey of Drug Use and Health. I downloaded the data via this link and the codebook is linked here."
  },
  {
    "objectID": "Example_Analysis.html#substance-use-experience-across-age",
    "href": "Example_Analysis.html#substance-use-experience-across-age",
    "title": "Example Analysis",
    "section": "",
    "text": "Across different age groups, how does experience using different substances vary?\n\n\nCode\nsubstance_ever &lt;- nsduh_2021_v1 %&gt;%\n  filter(across(c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), ~ !is.na(.))) %&gt;%\n  pivot_longer(cols = c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), names_to = \"Substance\", values_to = \"Ever_Tried\") %&gt;%\n  group_by(age, Substance, Ever_Tried) %&gt;%\n  summarise(Count = n()) %&gt;%\n  group_by(age, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Ever_Tried == \"Yes\"]) / sum(Count) * 100)\n\n\nWarning: Using `across()` in `filter()` was deprecated in dplyr 1.0.8.\nℹ Please use `if_any()` or `if_all()` instead.\n\n\n`summarise()` has grouped output by 'age', 'Substance'. You can override using\nthe `.groups` argument.\n\n\nCode\nsubstance_ever$Substance &lt;- factor(substance_ever$Substance)\n\nggplot(substance_ever, aes(x = age, y = Percentage, color = Substance, group = Substance)) +\n  geom_point() +\n  geom_path() +\n  labs(title = \"Proportion of Respondants by Age Group Who Have \\nEver Tried Each Substance\",\n       subtitle = \"FILL IN SUBTITLE\",\n       x = \"Age Group\",\n       y = \"Percentage of Respondants\",\n       caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  scale_color_discrete(labels = c(\n    cig_ever = \"Cigarettes\",\n    cigar_ever = \"Cigars\",\n    alc_ever = \"Alcohol\",\n    mj_ever = \"Marijuana\",\n    coc_ever = \"Cocaine\",\n    her_ever = \"Heroin\",\n    halluc_ever = \"Hallucinogens\",\n    meth_ever = \"Meth\",\n    inhal_ever = \"Inhalants\"\n  ))"
  },
  {
    "objectID": "Example_Analysis.html#substance-use-experience-across-sex",
    "href": "Example_Analysis.html#substance-use-experience-across-sex",
    "title": "Example Analysis",
    "section": "",
    "text": "How does exposure to different substances vary across sex and age group?\n\n\nCode\nsubstance_ever_sex &lt;- nsduh_2021_v1 %&gt;%\n  filter(across(c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), ~ !is.na(.))) %&gt;%\n  pivot_longer(cols = c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), names_to = \"Substance\", values_to = \"Ever_Tried\") %&gt;%\n  group_by(age, sex, Substance, Ever_Tried) %&gt;%\n  summarise(Count = n()) %&gt;%\n  group_by(age, sex, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Ever_Tried == \"Yes\"]) / sum(Count) * 100,\n         substance_label = case_when(\n           Substance == \"cig_ever\" ~ \"Cigarettes\",\n           Substance == \"cigar_ever\" ~ \"Cigars\",\n           Substance == \"alc_ever\" ~ \"Alcohol\",\n           Substance == \"mj_ever\" ~ \"Marijuana\",\n           Substance == \"coc_ever\" ~ \"Cocaine\",\n           Substance == \"her_ever\" ~ \"Heroin\",\n           Substance == \"halluc_ever\" ~ \"Hallucinogen\",\n           Substance == \"meth_ever\" ~ \"Methamphetamine\",\n           Substance == \"inhal_ever\" ~ \"Inhalants\",\n           TRUE ~ NA\n         ))\n\n\nWarning: Using `across()` in `filter()` was deprecated in dplyr 1.0.8.\nℹ Please use `if_any()` or `if_all()` instead.\n\n\n`summarise()` has grouped output by 'age', 'sex', 'Substance'. You can override\nusing the `.groups` argument.\n\n\nCode\nsubstance_ever_sex$Substance &lt;- factor(substance_ever_sex$Substance)\n\nggplot(substance_ever_sex, aes(x = age, y = Percentage, color = sex, group = sex)) +\n  geom_point() +\n  geom_path() +\n  labs(title = \"Percentage of Respondants Who Have Ever Tried Each Substance \\nAcross Age Groups and Sex\",\n       subtitle = \"FILL IN SUBTITLE\",\n       x = \"Age Group\",\n       y = \"Percentage\",\n       caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\nfacet_wrap(~ substance_label, scales = \"free_y\", ncol = 3) +\nscale_color_manual(values = c(\"Female\" = \"purple\", \"Male\" = \"darkgreen\")) +\ntheme(legend.position = \"top\")\n\n\n\n\n\n\n\nCode\nproportion_lastyear &lt;- nsduh_2021_v1 %&gt;%\n  pivot_longer(cols = c(cig_lastyear, cigar_lastyear, alc_lastyear, mj_lastyear, coc_lastyear, her_lastyear, halluc_lastyear, meth_lastyear, inhal_lastyear), names_to = \"Substance\", values_to = \"Last_Year\") %&gt;%\n  filter(!is.na(Last_Year)) %&gt;%\n  group_by(age, sex, Substance, Last_Year) %&gt;%\n  summarise(Count = n()) %&gt;%\n  group_by(age, sex, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Last_Year == \"Yes\"]) / sum(Count) * 100,\n         substance_label = case_when(\n           Substance == \"cig_lastyear\" ~ \"Cigarettes\",\n           Substance == \"cigar_lastyear\" ~ \"Cigars\",\n           Substance == \"alc_lastyear\" ~ \"Alcohol\",\n           Substance == \"mj_lastyear\" ~ \"Marijuana\",\n           Substance == \"coc_lastyear\" ~ \"Cocaine\",\n           Substance == \"her_lastyear\" ~ \"Heroin\",\n           Substance == \"halluc_lastyear\" ~ \"Hallucinogen\",\n           Substance == \"meth_lastyear\" ~ \"Methamphetamine\",\n           Substance == \"inhal_lastyear\" ~ \"Inhalants\",\n           TRUE ~ NA\n         ))\n\n\n`summarise()` has grouped output by 'age', 'sex', 'Substance'. You can override\nusing the `.groups` argument.\n\n\nCode\nggplot(proportion_lastyear, aes(x = age, y = Percentage, fill = sex, group = sex)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(\n    title = \"Percentage of Respondants Who Used Substance in the Last 12 Months \\nAcross Age Groups and Sex\",\n    x = \"Age Group\",\n    y = \"Percentage\",\n    caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\nscale_fill_manual(values = c(\"Female\" = \"purple\", \"Male\" = \"darkgreen\")) + \n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  facet_wrap(~ substance_label, scales = \"free_y\", ncol = 3) +\ntheme(legend.position = \"top\")"
  },
  {
    "objectID": "Example_Analysis.html#age-of-substance-use-initiation-across-substances",
    "href": "Example_Analysis.html#age-of-substance-use-initiation-across-substances",
    "title": "Example Analysis",
    "section": "Age of Substance Use Initiation across Substances",
    "text": "Age of Substance Use Initiation across Substances\nWhen do these people try a substance for the first time?\nTo explore this question, I used survey data asking respondents about the age of their first use of a substance. While this data was numeric with integers for age, I chose to create age group categories instead. For nearly all of the substances, the age group 15-19 is the most common time when people use for the first time. In general, substances generally considered “harder drugs” are initiated at older ages than drugs that are legal for adults.\n\n\nCode\nmedian_Substance_order &lt;- nsduh_2021_v1 %&gt;%\n  pivot_longer(cols = c(cig_tryage, cigar_tryage, alc_tryage, mj_tryage, coc_tryage, her_tryage, halluc_tryage, meth_tryage, inhal_tryage), names_to = \"Substance\", values_to = \"Try_Age\") %&gt;%\n  group_by(Substance) %&gt;%\n  summarise(Median_Try_Age = median(Try_Age, na.rm = TRUE)) %&gt;%\n  arrange(Median_Try_Age) %&gt;%\n  pull(Substance)\n\ncustom_labels &lt;- c(\n  \"cig_tryage\" = \"Cigarettes\",\n  \"cigar_tryage\" = \"Cigars\",\n  \"alc_tryage\" = \"Alcohol\",\n  \"mj_tryage\" = \"Marijuana\",\n  \"coc_tryage\" = \"Cocaine\",\n  \"her_tryage\" = \"Heroin\",\n  \"halluc_tryage\" = \"Hallucinogens\",\n  \"meth_tryage\" = \"Meth\",\n  \"inhal_tryage\" = \"Inhalants\"\n)\n\nproportion_data &lt;- nsduh_2021_v1 %&gt;%\n  pivot_longer(cols = c(cig_tryage, cigar_tryage, alc_tryage, mj_tryage, coc_tryage, her_tryage, halluc_tryage, meth_tryage, inhal_tryage), names_to = \"Substance\", values_to = \"Try_Age\") %&gt;%\n  filter(!is.na(Try_Age)) %&gt;%\n  mutate(Try_Age_Group = case_when(\n    Try_Age &gt;= 0 & Try_Age &lt; 5 ~ \"0-4\",\n    Try_Age &gt;= 5 & Try_Age &lt; 10 ~ \"5-9\",\n    Try_Age &gt;= 10 & Try_Age &lt; 15 ~ \"10-14\",\n    Try_Age &gt;= 15 & Try_Age &lt; 20 ~ \"15-19\",\n    Try_Age &gt;= 20 & Try_Age &lt; 25 ~ \"20-24\",\n    Try_Age &gt;= 25 & Try_Age &lt; 30 ~ \"25-29\",\n    Try_Age &gt;= 30 & Try_Age &lt; 35 ~ \"30-34\",\n    Try_Age &gt;= 35 & Try_Age &lt; 40 ~ \"35-39\",\n    Try_Age &gt;= 40 & Try_Age &lt; 45 ~ \"40-44\",\n    Try_Age &gt;= 45 & Try_Age &lt; 50 ~ \"45-49\",\n    Try_Age &gt;= 50 & Try_Age &lt; 55 ~ \"50-54\",\n    Try_Age &gt;= 55 ~ \"55+\",\n    TRUE ~ \"Other\"\n  )) %&gt;%\n  mutate(Try_Age_Group = factor(Try_Age_Group, levels = c(\"0-4\", \"5-9\", \"10-14\", \"15-19\", \"20-24\", \"25-29\", \"30-34\", \"35-39\", \"40-44\", \"45-49\", \"50-54\", \"55+\", \"Other\"))) %&gt;%\n  group_by(Substance, Try_Age_Group) %&gt;%\n  count() %&gt;%\n  ungroup() %&gt;%\n  group_by(Substance) %&gt;%\n  mutate(proportion = n / sum(n) * 100) %&gt;%\n  ungroup()\n\nggplot(proportion_data, aes(x = Try_Age_Group, y = factor(Substance, levels = median_Substance_order), fill = proportion)) +\n  geom_tile(width = 0.9, height = 0.9, color = \"white\") +\n  geom_text(aes(label = sprintf(\"%.1f%%\", proportion)), vjust = 1, color = \"white\", size = 2.5) +\n  scale_fill_gradient(low = \"lightblue\", high = \"darkblue\") +\n  theme_minimal() +\n  labs(\n    title = \"Percentage of Respondents to First Use Substance\",\n    subtitle = \"Substances are organized by median age of substance use initiation, \\nwith greater median age at the top of the plot. Respondents are included \\nif they have ever used the substance.\",\n    x = \"Age of Substance Use Initiation (years)\",\n    y = \"Substance\",\n    fill = \"Percentage \\nof Respondents\",\n    caption = \"Source: NSDUH 2021\"\n  ) + \n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  scale_y_discrete(labels = custom_labels)"
  },
  {
    "objectID": "Example_Analysis.html#ever-substance-use-experience-across-age",
    "href": "Example_Analysis.html#ever-substance-use-experience-across-age",
    "title": "Example Analysis",
    "section": "“Ever” Substance Use Experience Across Age",
    "text": "“Ever” Substance Use Experience Across Age\nAcross different age groups, how does experience using different substances vary?\n\n\n\n\n\n\nVisualization Note\n\n\n\nPlease note that the age categories are not of equal size. These are the same age categories used in the NSDUH survey.\n\n\n\n\nCode\nsubstance_ever &lt;- nsduh_2021_v1 %&gt;%\n  filter(across(c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), ~ !is.na(.))) %&gt;%\n  pivot_longer(cols = c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), names_to = \"Substance\", values_to = \"Ever_Tried\") %&gt;%\n  group_by(age, Substance, Ever_Tried) %&gt;%\n  summarise(Count = n()) %&gt;%\n  group_by(age, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Ever_Tried == \"Yes\"]) / sum(Count) * 100)\n\n\nWarning: Using `across()` in `filter()` was deprecated in dplyr 1.0.8.\nℹ Please use `if_any()` or `if_all()` instead.\n\n\n`summarise()` has grouped output by 'age', 'Substance'. You can override using\nthe `.groups` argument.\n\n\nCode\nsubstance_ever$Substance &lt;- factor(substance_ever$Substance)\n\nggplot(substance_ever, aes(x = age, y = Percentage, color = Substance, group = Substance)) +\n  geom_point() +\n  geom_path() +\n  labs(title = \"Proportion of Respondants by Age Group Who Have \\nEver Tried Each Substance\",\n       subtitle = \"FILL IN SUBTITLE\",\n       x = \"Age Group\",\n       y = \"Percentage of Respondants\",\n       caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  scale_color_discrete(labels = c(\n    cig_ever = \"Cigarettes\",\n    cigar_ever = \"Cigars\",\n    alc_ever = \"Alcohol\",\n    mj_ever = \"Marijuana\",\n    coc_ever = \"Cocaine\",\n    her_ever = \"Heroin\",\n    halluc_ever = \"Hallucinogens\",\n    meth_ever = \"Meth\",\n    inhal_ever = \"Inhalants\"\n  ))"
  },
  {
    "objectID": "Example_Analysis.html#ever-substance-use-experience-across-sex",
    "href": "Example_Analysis.html#ever-substance-use-experience-across-sex",
    "title": "Example Analysis",
    "section": "“Ever” Substance Use Experience across Sex",
    "text": "“Ever” Substance Use Experience across Sex\nHow does exposure to different substances vary across sex and age group?\n\n\n\n\n\n\nVisualization Note\n\n\n\nPlease note that the scales on the y-axis are not identical across the faceted plots for the next two visualizations. Because of the wide variation in prevalance of use for these different substances, I chose to adjust the y-axis’ scale in order to clarify the use differences across sex.\n\n\n\n\nCode\nsubstance_ever_sex &lt;- nsduh_2021_v1 %&gt;%\n  filter(across(c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), ~ !is.na(.))) %&gt;%\n  pivot_longer(cols = c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), names_to = \"Substance\", values_to = \"Ever_Tried\") %&gt;%\n  group_by(age, sex, Substance, Ever_Tried) %&gt;%\n  summarise(Count = n()) %&gt;%\n  group_by(age, sex, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Ever_Tried == \"Yes\"]) / sum(Count) * 100,\n         substance_label = case_when(\n           Substance == \"cig_ever\" ~ \"Cigarettes\",\n           Substance == \"cigar_ever\" ~ \"Cigars\",\n           Substance == \"alc_ever\" ~ \"Alcohol\",\n           Substance == \"mj_ever\" ~ \"Marijuana\",\n           Substance == \"coc_ever\" ~ \"Cocaine\",\n           Substance == \"her_ever\" ~ \"Heroin\",\n           Substance == \"halluc_ever\" ~ \"Hallucinogen\",\n           Substance == \"meth_ever\" ~ \"Methamphetamine\",\n           Substance == \"inhal_ever\" ~ \"Inhalants\",\n           TRUE ~ NA\n         ))\n\n\nWarning: Using `across()` in `filter()` was deprecated in dplyr 1.0.8.\nℹ Please use `if_any()` or `if_all()` instead.\n\n\n`summarise()` has grouped output by 'age', 'sex', 'Substance'. You can override\nusing the `.groups` argument.\n\n\nCode\nsubstance_ever_sex$Substance &lt;- factor(substance_ever_sex$Substance)\n\nggplot(substance_ever_sex, aes(x = age, y = Percentage, color = sex, group = sex)) +\n  geom_point() +\n  geom_path() +\n  labs(title = \"Percentage of Respondants Who Have Ever Tried Each Substance \\nAcross Age Groups and Sex\",\n       subtitle = \"FILL IN SUBTITLE\",\n       x = \"Age Group\",\n       y = \"Percentage\",\n       caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\nfacet_wrap(~ substance_label, scales = \"free_y\", ncol = 3) +\nscale_color_manual(values = c(\"Female\" = \"purple\", \"Male\" = \"darkgreen\")) +\ntheme(legend.position = \"top\")"
  },
  {
    "objectID": "Example_Analysis.html#substance-use-in-last-year-across-age-and-sex",
    "href": "Example_Analysis.html#substance-use-in-last-year-across-age-and-sex",
    "title": "Example Analysis",
    "section": "Substance Use in Last Year Across Age and Sex",
    "text": "Substance Use in Last Year Across Age and Sex\n\n\nCode\nproportion_lastyear &lt;- nsduh_2021_v1 %&gt;%\n  pivot_longer(cols = c(cig_lastyear, cigar_lastyear, alc_lastyear, mj_lastyear, coc_lastyear, her_lastyear, halluc_lastyear, meth_lastyear, inhal_lastyear), names_to = \"Substance\", values_to = \"Last_Year\") %&gt;%\n  filter(!is.na(Last_Year)) %&gt;%\n  group_by(age, sex, Substance, Last_Year) %&gt;%\n  summarise(Count = n()) %&gt;%\n  group_by(age, sex, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Last_Year == \"Yes\"]) / sum(Count) * 100,\n         substance_label = case_when(\n           Substance == \"cig_lastyear\" ~ \"Cigarettes\",\n           Substance == \"cigar_lastyear\" ~ \"Cigars\",\n           Substance == \"alc_lastyear\" ~ \"Alcohol\",\n           Substance == \"mj_lastyear\" ~ \"Marijuana\",\n           Substance == \"coc_lastyear\" ~ \"Cocaine\",\n           Substance == \"her_lastyear\" ~ \"Heroin\",\n           Substance == \"halluc_lastyear\" ~ \"Hallucinogen\",\n           Substance == \"meth_lastyear\" ~ \"Methamphetamine\",\n           Substance == \"inhal_lastyear\" ~ \"Inhalants\",\n           TRUE ~ NA\n         ))\n\n\n`summarise()` has grouped output by 'age', 'sex', 'Substance'. You can override\nusing the `.groups` argument.\n\n\nCode\nggplot(proportion_lastyear, aes(x = age, y = Percentage, fill = sex, group = sex)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(\n    title = \"Percentage of Respondants Who Used Substance in the Last 12 Months \\nAcross Age Groups and Sex\",\n    x = \"Age Group\",\n    y = \"Percentage\",\n    caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\nscale_fill_manual(values = c(\"Female\" = \"purple\", \"Male\" = \"darkgreen\")) + \n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  facet_wrap(~ substance_label, scales = \"free_y\", ncol = 3) +\ntheme(legend.position = \"top\")"
  },
  {
    "objectID": "Example_Analysis.html#substances-ever-tried-across-age",
    "href": "Example_Analysis.html#substances-ever-tried-across-age",
    "title": "Example Analysis",
    "section": "Substances Ever Tried Across Age",
    "text": "Substances Ever Tried Across Age\nAcross different age groups, how does experience using different substances vary?\n\n\n\n\n\n\nVisualization Note\n\n\n\nPlease note that the age categories are not of equal size. These are the same age categories used in the NSDUH survey. The dashed lines connecting the points are meant to help guide the reader to see trends across these age groups, but not imply continuous age data\n\n\n\n\nCode\nlibrary(paletteer)\n\nsubstance_ever &lt;- nsduh_2021_v1 %&gt;%\n  filter(across(c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), ~ !is.na(.))) %&gt;%\n  pivot_longer(cols = c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), names_to = \"Substance\", values_to = \"Ever_Tried\") %&gt;%\n  group_by(age, Substance, Ever_Tried) %&gt;%\n  summarise(Count = n(), .groups = 'drop') %&gt;%\n  group_by(age, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Ever_Tried == \"Yes\"]) / sum(Count) * 100)\n\nsubstance_ever$Substance &lt;- factor(substance_ever$Substance)\n\nggplot(substance_ever, aes(x = age, y = Percentage, color = Substance, group = Substance)) +\n  geom_point(size = 2.5) +\n  geom_path(linetype = 2) +\n  labs(title = \"Proportion of Respondents by Age Group Who Have \\nEver Tried Each Substance\",\n       subtitle = \"FILL IN SUBTITLE\",\n       x = \"Age Group\",\n       y = \"Percentage of Respondents\",\n       caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))  +\n  scale_colour_manual(values = paletteer::paletteer_d(\"ggprism::stained_glass\"),\n                      labels = c(\n    cig_ever = \"Cigarettes\",\n    cigar_ever = \"Cigars\",\n    alc_ever = \"Alcohol\",\n    mj_ever = \"Marijuana\",\n    coc_ever = \"Cocaine\",\n    her_ever = \"Heroin\",\n    halluc_ever = \"Hallucinogens\",\n    meth_ever = \"Meth\",\n    inhal_ever = \"Inhalants\"\n  ))"
  },
  {
    "objectID": "Example_Analysis.html#substances-ever-tried-across-sex",
    "href": "Example_Analysis.html#substances-ever-tried-across-sex",
    "title": "Example Analysis",
    "section": "Substances Ever Tried across Sex",
    "text": "Substances Ever Tried across Sex\nHow does exposure to different substances vary across sex and age group?\n\n\n\n\n\n\nVisualization Note\n\n\n\nPlease note that the scales on the y-axis are not identical across the faceted plots for the next two visualizations. Because of the wide variation in prevalance of use for these different substances, I chose to adjust the y-axis’ scale in order to clarify the use differences across sex.\n\n\n\n\nCode\nsubstance_ever_sex &lt;- nsduh_2021_v1 %&gt;%\n  filter(across(c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), ~ !is.na(.))) %&gt;%\n  pivot_longer(cols = c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), names_to = \"Substance\", values_to = \"Ever_Tried\") %&gt;%\n  group_by(age, sex, Substance, Ever_Tried) %&gt;%\n  summarise(Count = n(), .groups = 'drop') %&gt;%\n  group_by(age, sex, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Ever_Tried == \"Yes\"]) / sum(Count) * 100,\n         substance_label = case_when(\n           Substance == \"cig_ever\" ~ \"Cigarettes\",\n           Substance == \"cigar_ever\" ~ \"Cigars\",\n           Substance == \"alc_ever\" ~ \"Alcohol\",\n           Substance == \"mj_ever\" ~ \"Marijuana\",\n           Substance == \"coc_ever\" ~ \"Cocaine\",\n           Substance == \"her_ever\" ~ \"Heroin\",\n           Substance == \"halluc_ever\" ~ \"Hallucinogen\",\n           Substance == \"meth_ever\" ~ \"Methamphetamine\",\n           Substance == \"inhal_ever\" ~ \"Inhalants\",\n           TRUE ~ NA\n         ))\n\nsubstance_ever_sex$Substance &lt;- factor(substance_ever_sex$Substance)\n\nggplot(substance_ever_sex, aes(x = age, y = Percentage, color = sex, group = sex)) +\n  geom_point() +\n  geom_path() +\n  labs(title = \"Percentage of Respondents Who Have Ever Tried Each Substance \\nAcross Age Groups and Sex\",\n       subtitle = \"NEED TO FILL IN\",\n       x = \"Age Group\",\n       y = \"Percentage of Respondents\",\n       color = \"Sex:\",\n       caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 7)) +\nfacet_wrap(~ substance_label, scales = \"free_y\", ncol = 3) +\nscale_color_manual(values = c(\"Female\" = \"purple\", \"Male\" = \"darkgreen\")) +\ntheme(legend.position = \"top\")"
  },
  {
    "objectID": "Example_Analysis.html#recent-substance-use-across-age-and-sex",
    "href": "Example_Analysis.html#recent-substance-use-across-age-and-sex",
    "title": "Example Analysis",
    "section": "Recent Substance Use Across Age and Sex",
    "text": "Recent Substance Use Across Age and Sex\nHow does recent substance use vary across age and sex?\nIn this section, I used survey information about how recent the respondent has used a substance. While there were often more categories available, depending on the substance, I chose to define “recent use” as happening in the last 12 months and coded the responses to reflect a binary variable. Similar to the responses related to any lifetime use in my earlier visualization, male respondents are overall more likely to use these substances than female participants.\n\n\nCode\nproportion_lastyear &lt;- nsduh_2021_v1 %&gt;%\n  pivot_longer(cols = c(cig_lastyear, cigar_lastyear, alc_lastyear, mj_lastyear, coc_lastyear, her_lastyear, halluc_lastyear, meth_lastyear, inhal_lastyear), names_to = \"Substance\", values_to = \"Last_Year\") %&gt;%\n  filter(!is.na(Last_Year)) %&gt;%\n  group_by(age, sex, Substance, Last_Year) %&gt;%\n  summarise(Count = n(), .groups = 'drop') %&gt;%\n  group_by(age, sex, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Last_Year == \"Yes\"]) / sum(Count) * 100,\n         substance_label = case_when(\n           Substance == \"cig_lastyear\" ~ \"Cigarettes\",\n           Substance == \"cigar_lastyear\" ~ \"Cigars\",\n           Substance == \"alc_lastyear\" ~ \"Alcohol\",\n           Substance == \"mj_lastyear\" ~ \"Marijuana\",\n           Substance == \"coc_lastyear\" ~ \"Cocaine\",\n           Substance == \"her_lastyear\" ~ \"Heroin\",\n           Substance == \"halluc_lastyear\" ~ \"Hallucinogen\",\n           Substance == \"meth_lastyear\" ~ \"Methamphetamine\",\n           Substance == \"inhal_lastyear\" ~ \"Inhalants\",\n           TRUE ~ NA\n         ))\n\nggplot(proportion_lastyear, aes(x = age, y = Percentage, fill = sex, group = sex)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(\n    title = \"Percentage of Respondents Who Used Substance in the Last 12 Months \\nAcross Age Groups and Sex\",\n    x = \"Age Group\",\n    y = \"Percentage of Respondents\",\n    fill = \"Sex:\",\n    caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\nscale_fill_manual(values = c(\"Female\" = \"purple\", \"Male\" = \"darkgreen\")) + \n  theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 7)) +\n  facet_wrap(~ substance_label, scales = \"free_y\", ncol = 3) +\ntheme(legend.position = \"top\")"
  },
  {
    "objectID": "Example_Analysis.html#how-does-recreational-substance-use-vary-across-age-and-gender",
    "href": "Example_Analysis.html#how-does-recreational-substance-use-vary-across-age-and-gender",
    "title": "Example Analysis",
    "section": "",
    "text": "In this analysis, I am interested in exploring how substance use varies across age and gender in the United States. This analysis is intended for anyone interested in public health and trends related to these topics."
  },
  {
    "objectID": "Example_Analysis.html#substances-ever-used-across-age",
    "href": "Example_Analysis.html#substances-ever-used-across-age",
    "title": "Example Analysis",
    "section": "Substances Ever Used Across Age",
    "text": "Substances Ever Used Across Age\nAcross different age groups, how does experience using different substances vary?\nI used survey data related to questions “Have you ever used ___?“, which was a question for each of the substances I included. As we may expect, substances traditionally thought of as”harder drugs,” like heroin and meth, have fewer people who have tried them than legal substances like alcohol and cigarettes. In older age groups, there are wider gaps in exposure across the different substance. Perhaps in younger age groups, especially when none of these substances are legal to their age group, the respondents who are exposed to a substance are more likely to be experimenting with a variety of substances.\n\n\n\n\n\n\nVisualization Note\n\n\n\nPlease note that the age categories are not of equal size. These are the same age categories used in the NSDUH survey. The dashed lines connecting the points are meant to help guide the reader to see trends across these age groups, but not imply continuous age data\n\n\n\n\nCode\nlibrary(paletteer)\n\nsubstance_ever &lt;- nsduh_2021_v1 %&gt;%\n  filter(across(c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), ~ !is.na(.))) %&gt;%\n  pivot_longer(cols = c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), names_to = \"Substance\", values_to = \"Ever_Tried\") %&gt;%\n  group_by(age, Substance, Ever_Tried) %&gt;%\n  summarise(Count = n(), .groups = 'drop') %&gt;%\n  group_by(age, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Ever_Tried == \"Yes\"]) / sum(Count) * 100)\n\nsubstance_ever$Substance &lt;- factor(substance_ever$Substance)\n\nggplot(substance_ever, aes(x = age, y = Percentage, color = Substance, group = Substance)) +\n  geom_point(size = 2.5) +\n  geom_path(linetype = 2) +\n  labs(title = \"Proportion of Respondents by Age Group Who Have \\nEver Tried Each Substance\",\n       subtitle = \"FILL IN SUBTITLE\",\n       x = \"Age Group\",\n       y = \"Percentage of Respondents\",\n       caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))  +\n  scale_colour_manual(values = paletteer::paletteer_d(\"ggprism::stained_glass\"),\n                      labels = c(\n    cig_ever = \"Cigarettes\",\n    cigar_ever = \"Cigars\",\n    alc_ever = \"Alcohol\",\n    mj_ever = \"Marijuana\",\n    coc_ever = \"Cocaine\",\n    her_ever = \"Heroin\",\n    halluc_ever = \"Hallucinogens\",\n    meth_ever = \"Meth\",\n    inhal_ever = \"Inhalants\"\n  ))"
  },
  {
    "objectID": "Example_Analysis.html#substances-ever-used-across-sex",
    "href": "Example_Analysis.html#substances-ever-used-across-sex",
    "title": "Example Analysis",
    "section": "Substances Ever Used across Sex",
    "text": "Substances Ever Used across Sex\nThis analysis uses the same survey data as the previous section, though the responses are grouped by sex, which was collected as a binary variable. In most cases, the percentage of male participants who have experimented with these substances in greater than the percentage of female participants. The difference in these percentages appears to be larger in older age groups.\nHow does exposure to different substances vary across sex and age?\n\n\n\n\n\n\nVisualization Note\n\n\n\nPlease note that the scales on the y-axis are not identical across the faceted plots for the next two visualizations. Because of the wide variation in prevalance of use for these different substances, I chose to adjust the y-axis’ scale in order to clarify the use differences across sex.\n\n\n\n\nCode\nsubstance_ever_sex &lt;- nsduh_2021_v1 %&gt;%\n  filter(across(c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), ~ !is.na(.))) %&gt;%\n  pivot_longer(cols = c(cig_ever, cigar_ever, alc_ever, mj_ever, coc_ever, her_ever, halluc_ever, meth_ever, inhal_ever), names_to = \"Substance\", values_to = \"Ever_Tried\") %&gt;%\n  group_by(age, sex, Substance, Ever_Tried) %&gt;%\n  summarise(Count = n(), .groups = 'drop') %&gt;%\n  group_by(age, sex, Substance) %&gt;%\n  mutate(Percentage = sum(Count[Ever_Tried == \"Yes\"]) / sum(Count) * 100,\n         substance_label = case_when(\n           Substance == \"cig_ever\" ~ \"Cigarettes\",\n           Substance == \"cigar_ever\" ~ \"Cigars\",\n           Substance == \"alc_ever\" ~ \"Alcohol\",\n           Substance == \"mj_ever\" ~ \"Marijuana\",\n           Substance == \"coc_ever\" ~ \"Cocaine\",\n           Substance == \"her_ever\" ~ \"Heroin\",\n           Substance == \"halluc_ever\" ~ \"Hallucinogen\",\n           Substance == \"meth_ever\" ~ \"Methamphetamine\",\n           Substance == \"inhal_ever\" ~ \"Inhalants\",\n           TRUE ~ NA\n         ))\n\nsubstance_ever_sex$Substance &lt;- factor(substance_ever_sex$Substance)\n\nggplot(substance_ever_sex, aes(x = age, y = Percentage, color = sex, group = sex)) +\n  geom_point() +\n  geom_path() +\n  labs(title = \"Percentage of Respondents Who Have Ever Tried Each Substance \\nAcross Age Groups and Sex\",\n       subtitle = \"NEED TO FILL IN\",\n       x = \"Age Group\",\n       y = \"Percentage of Respondents\",\n       color = \"Sex:\",\n       caption = \"Source: NSDUH 2021\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 7)) +\nfacet_wrap(~ substance_label, scales = \"free_y\", ncol = 3) +\nscale_color_manual(values = c(\"Female\" = \"purple\", \"Male\" = \"darkgreen\")) +\ntheme(legend.position = \"top\")"
  }
]